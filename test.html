<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>test</title>
	<style>
		.custom-scrollbar-wrap{width:300px; height:400px; border:1px solid gray; padding-right: 20px; position: relative; overflow: ;}
		.custom-scrollbar-wrap .custom-scrollbar-con{position: relative; background-color:red; font-size: 20px; height:1000px;}
		.custom-scrollbar-wrap .custom-scrollbar-bg{width:20px; height:100%; position: absolute; right:0px; top:0px;}
		.custom-scrollbar-wrap .custom-scrollbar-area{ background-color: silver; width:100%; height:100%; margin:0px auto;}
		.custom-scrollbar-wrap .custom-scrollbar-dragger{width:100%; border-radius: 10px; background-color: green; position: relative;}
	</style>
</head>
<body>
	<div id="scrollbar" class="custom-scrollbar-wrap">
		<div class="custom-scrollbar-con">Highly customizable custom scrollbar jQuery plugin. Features include vertical and/or horizontal scrollbar(s), adjustable scrolling momentum, mouse-wheel (via jQuery mousewheel plugin), keyboard and touch support, ready-to-use themes and customization via CSS, RTL direction support, option parameters for full control of scrollbar functionality, methods for triggering actions like scroll-to, update, destroy etc., user-defined callbacks and more.Highly customizable custom scrollbar jQuery plugin. Features include vertical and/or horizontal scrollbar(s), adjustable scrolling momentum, mouse-wheel (via jQuery mousewheel plugin), keyboard and touch support, ready-to-use themes and customization via CSS, RTL direction support, option parameters for full control of scrollbar functionality, methods for triggering actions like scroll-to, update, destroy etc., user-defined callbacks and more.</div>
		<div class="custom-scrollbar-bg"><div class="custom-scrollbar-area"><div class="custom-scrollbar-dragger"></div></div></div>
	</div>
	<script type="text/javascript" src="jquery/jquery.js"></script>
	<script type="text/javascript">
		$.fn.customScrollbar = function(){

			var self = this;

			self.content = $(this).find('.custom-scrollbar-con');
			self.H = $(this).height();
			self.area = $(this).find('.custom-scrollbar-area');
			self.dragger = $(this).find('.custom-scrollbar-dragger');
			self.conH = self.content.outerHeight();
			self.areaH = self.area.height();
			self.draggerH = self.dragger.height();
			self.pace = 30;
			self.radio = self.H/self.conH;
			self.conTopMin = self.H-self.conH;
			self.draggerTopMax = self.areaH-self.draggerH;

			if(self.conH <= self.H) return;

			initScrollbar();
			$(this).bind('mousewheel DOMMouseScroll',mousewheelHandle);
			self.area.bind('click',clickHandle);
			self.dragger.bind('mousedown',mousedownHandle);
			self.dragger.bind('mousemove',mousemoveHandle);
			self.dragger.bind('mouseup',mouseupHandle);

			function initScrollbar(){
				self.dragger.height(self.areaH*self.radio);
				self.draggerH = self.dragger.height();
				self.draggerTopMax = self.areaH-self.draggerH;
			}

			function mousewheelHandle(e){
				e.preventDefault();
				var delta = e.originalEvent.wheelDelta || -e.originalEvent.detail;
				var contop = parseInt(self.content.css('top')) || 0;
				var draggertop = parseInt(self.dragger.css('top')) || 0;
				if(delta>0){
					if(contop >= -self.pace){
						self.content.css('top',0);
						self.dragger.css('top',0);
					}else{
						self.content.css('top',contop+self.pace);
						self.dragger.css('top',draggertop-self.pace/(-self.conTopMin)*self.draggerTopMax);
					}
				}else if(delta<0){
					if(contop <= self.conTopMin+self.pace){
						self.content.css('top',self.conTopMin);
						self.dragger.css('top',self.draggerTopMax);
					}else{
						self.content.css('top',contop-self.pace);
						self.dragger.css('top',draggertop+self.pace/(-self.conTopMin)*self.draggerTopMax);
					}
				}
			}
			function clickHandle(e){console.log(e.offsetY);
				if(e.target == self.area[0]){
					var contop = parseInt(self.content.css('top')) || 0;
					var draggertop = parseInt(self.dragger.css('top')) || 0;
					if(e.offsetY <= draggertop){
						if(draggertop <=self.draggerH){
							self.dragger.css('top',0);
						}else{
							self.dragger.css('top',draggertop - self.draggerH);
						};
					}else if(e.offsetY >= draggertop+self.draggerH){
						if(draggertop+self.draggerH >= self.areaH-self.draggerH){
							self.dragger.css('top',self.areaH-self.draggerH);
						}else{
							self.dragger.css('top',draggertop + self.draggerH);
						};
					}
				}
			}
			function mousedownHandle(e){}
			function mousemoveHandle(e){}
			function mouseupHandle(e){}
		}
		$('#scrollbar').customScrollbar();
	</script>
</body>
</html>